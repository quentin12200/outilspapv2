# Configuration de l'application PAP/CSE

# === Base de données ===
# URL SQLite locale (par défaut)
DATABASE_URL=sqlite:///./papcse.db

# URL de téléchargement automatique de la base depuis GitHub Release
# Si la base n'existe pas au démarrage, elle sera téléchargée automatiquement
DB_URL=https://github.com/quentin12200/outilspapv2/releases/download/v1.0.0/papcse.db

# Hash SHA256 de la base (optionnel, pour vérifier l'intégrité)
DB_SHA256=2a699fe2236005cadc756ec59f8f21fa35fd542262823b9998b7fc49192d445d

# Token GitHub si le repo est privé (optionnel)
# DB_GH_TOKEN=

# Échouer si le hash ne correspond pas (par défaut : warning seulement)
# DB_FAIL_ON_HASH_MISMATCH=false

# === Invitations PAP automatiques ===
# URL d'un fichier Excel (.xlsx) contenant les invitations C5 à précharger
# Si non défini, l'application tentera de déduire un fichier situé sur la même
# release que `DB_URL` (ex. `papcse-invitations.xlsx`).
# INVITATIONS_URL=https://github.com/quentin12200/outilspapv2/releases/download/v1.0.0/invitations.xlsx

# Hash SHA256 optionnel du fichier pour vérifier l'intégrité
# INVITATIONS_SHA256=

# Token GitHub si l'asset est privé (optionnel, défaut : DB_GH_TOKEN)
# INVITATIONS_GH_TOKEN=

# Échouer si le hash des invitations ne correspond pas (défaut : warning)
# INVITATIONS_FAIL_ON_HASH_MISMATCH=false

# === API Sirene (INSEE) ===
# Clé API d'intégration pour l'API Sirene 3.11 (header X-INSEE-Api-Key-Integration)
# Supporte SIRENE_API_KEY ou API_SIRENE_KEY
# SIRENE_API_KEY=
# API_SIRENE_KEY=
# Ancien token OAuth (header Authorization: Bearer ...) - obsolète
# SIRENE_API_TOKEN=

# === OpenAI API ===
# Clé API OpenAI pour l'extraction automatique d'informations depuis les courriers PAP
# ATTENTION: Ne JAMAIS commiter cette clé dans le code source
# Obtenir une clé sur https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-proj-...

# Modèle OpenAI à utiliser (optionnel, défaut: gpt-4o)
# Le système essaiera automatiquement plusieurs modèles si le premier n'est pas accessible
# Options: gpt-4o, gpt-4o-2024-11-20, gpt-4o-mini, gpt-4-turbo, etc.
# OPENAI_MODEL=gpt-4o

# === Reconstruction automatique de siret_summary ===
# Si true, la table siret_summary sera reconstruite automatiquement au démarrage
# si elle est vide. ATTENTION : peut causer des timeouts avec de grandes bases.
# Par défaut (false), utiliser POST /api/build/summary pour lancer en tâche de fond.
AUTO_BUILD_SUMMARY_ON_STARTUP=false

# === Authentification plateforme ===
# Mot de passe pour accéder à la plateforme
# Par défaut : papcse2025
PLATFORM_PASSWORD=papcse2025

# Clé secrète pour les sessions de la plateforme (générée automatiquement si non définie)
# PLATFORM_SESSION_SECRET=

# Durée de validité des sessions en secondes (défaut : 86400 = 24 heures)
# PLATFORM_SESSION_MAX_AGE=86400

# === Mode debug ===
# DEBUG=false
